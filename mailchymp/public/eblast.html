<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Eblast â€“ Mailchymp</title>
    <link rel="stylesheet" href="assets/css/eblast.css" />
    <link rel="stylesheet" href="assets/css/toast.css" />
    <link rel="stylesheet" href="assets/css/topbar.css" />
  </head>

  <body>
    <div id="topbarMount"></div>

    <div class="wrap">
      <section class="card">
        <div class="pill">
          <div>
            <div class="fw900">Gmail connection</div>
            <div class="muted" id="gmailStatusText">Checkingâ€¦</div>
          </div>
          <div class="rowActions">
            <button class="btn" id="btnConnect" type="button">
              Connect Gmail
            </button>
            <button class="btn danger" id="btnDisconnect" type="button">
              Disconnect
            </button>
          </div>
        </div>
      </section>

      <div class="grid">
        <section class="card">
          <h2>Compose</h2>

          <div class="row">
            <label>Recipient List</label>
            <select id="listSelect">
              <option value="">-- Select a list --</option>
            </select>

            <div class="rowActions">
              <input id="newListName" placeholder="New list name (optional)" />
              <button class="btn small" id="btnCreateList" type="button">
                Create List
              </button>
            </div>

            <!--<div class="rowActions">
              <input
                id="emailsInput"
                placeholder="Add emails: a@a.com, b@b.com, ..."
              />
              <button class="btn small" id="btnAddEmails" type="button">
                Add Emails
              </button>
            </div>
          </div>-->

          <!-- âœ… LIST MANAGER LAUNCHER -->
          <div class="row" id="listManager" style="display: none">
            <label>Selected List</label>

            <div class="rowActions" style="align-items: center; gap: 10px">
              <button class="btn small" id="btnOpenListModal" type="button">
                ðŸ“‚ <span id="listNameText">â€”</span>
              </button>
            </div>
          </div>

          <!-- âœ… LIST MODAL -->
          <div
            id="listModal"
            class="mcModal"
            aria-hidden="true"
            style="display: none"
          >
            <div class="mcModalOverlay" id="listModalOverlay"></div>

            <div
              class="mcModalPanel"
              role="dialog"
              aria-modal="true"
              aria-labelledby="listModalTitle"
            >
              <div class="mcModalHead">
                <div>
                  <div id="listModalTitle" class="fw900">List members</div>
                  <div class="muted" id="listModalSub">â€”</div>
                </div>
                <button
                  class="btn small danger"
                  id="btnCloseListModal"
                  type="button"
                >
                  Ã—
                </button>
              </div>

              <div class="mcModalBody">
                <div class="rowActions" style="gap: 10px; flex-wrap: wrap">
                  <input
                    id="singleEmailInput"
                    placeholder="Add single email: a@a.com"
                  />
                  <button
                    class="btn small"
                    id="btnAddSingleEmail"
                    type="button"
                  >
                    Add
                  </button>
                  <button
                    class="btn small"
                    id="btnRefreshMembers"
                    type="button"
                  >
                    Refresh
                  </button>
                </div>

                <div
                  style="max-height: 360px; overflow: auto; margin-top: 10px"
                >
                  <table style="width: 100%">
                    <thead>
                      <tr>
                        <th style="text-align: left">Email</th>
                        <th style="width: 160px; text-align: left">Action</th>
                      </tr>
                    </thead>
                    <tbody id="listMembersBody">
                      <tr>
                        <td colspan="2" class="muted">
                          No emails in this list
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="mcModalFoot">
                <button class="btn" id="btnCloseListModal2" type="button">
                  Close
                </button>
              </div>
            </div>
          </div>

          <div class="row">
            <label>Title</label
            ><input id="title" placeholder="Campaign title" />
          </div>
          <div class="row">
            <label>Subject</label
            ><input id="subject" placeholder="Email subject" />
          </div>
          <div class="row">
            <label>From name</label
            ><input id="fromName" placeholder="Your brand name" />
          </div>
          <div class="row">
            <label>Reply-to (optional)</label
            ><input id="replyTo" placeholder="reply@domain.com" />
          </div>

          <div class="row">
            <label>HTML</label>
            <textarea
              id="htmlInput"
              placeholder="Paste email HTML here..."
            ></textarea>
          </div>

          <div class="rowActions">
            <button class="btn" id="btnSaveDraft" type="button">
              Save Draft
            </button>
            <button class="btn" id="btnNewDraft" type="button">
              New Draft
            </button>
            <button class="btn primary" id="btnCreateCampaign" type="button">
              Create Campaign
            </button>
            <button class="btn primary" id="btnSendNow" type="button">
              Send Now (by List)
            </button>
            <input
              id="scheduleAt"
              class="dt"
              type="datetime-local"
              title="Schedule time"
            />
            <button class="btn primary" id="btnSchedule" type="button">
              Schedule
            </button>
          </div>

          <div class="row">
            <label>Campaign ID</label>
            <input
              id="campaignId"
              class="mono"
              placeholder="auto after create"
            />
          </div>

          <div class="muted" id="draftMeta">Draft: not saved yet</div>
          <div class="muted mt6" id="scheduleMeta"></div>
        </section>

        <section class="card previewCard">
          <h2>Live Preview</h2>
          <div class="previewWrap">
            <div class="previewHead">
              <div class="muted">Preview updates as you type</div>
              <div class="rowActions">
                <button class="btn small" id="btnPreviewRefresh" type="button">
                  Refresh
                </button>
                <button class="btn small" id="btnPreviewPop" type="button">
                  Open
                </button>
              </div>
            </div>
            <iframe
              id="previewFrame"
              class="previewFrame"
              sandbox="allow-same-origin"
            ></iframe>
          </div>
        </section>
      </div>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite">
      <div class="r">
        <div id="toastText"></div>
        <button class="x" id="toastX" type="button">Ã—</button>
      </div>
    </div>

    <script src="assets/js/lib.js"></script>
    <script src="assets/js/topbar.js"></script>
    <script>
      injectTopbar();
    </script>
    <script src="assets/js/eblast.js"></script>
  </body>
</html>
